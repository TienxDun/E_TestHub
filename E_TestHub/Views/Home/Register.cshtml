@{
    ViewData["Title"] = "Đăng ký";
}

<link rel="stylesheet" href="~/css/Register.css" />

<div class="header">
    <div class="header-container">
        <a href="@Url.Action("Index", "Home")" class="logo">eTestHub</a>
        <nav class="nav-links">
            <a href="@Url.Action("Index", "Home")" class="nav-link">Trang chủ</a>
            <a href="#" class="nav-link">Khóa học</a>
            <a href="#" class="nav-link">Bài thi</a>
            <a href="#" class="nav-link">Về chúng tôi</a>
            <a href="@Url.Action("Login", "Home")" class="login-btn">Đăng nhập</a>
        </nav>
    </div>
</div>

<div class="register-container">
    <!-- Left Side - Registration Form -->
    <div class="register-content">
        <h1 class="register-title">Tạo tài khoản</h1>
        <p class="register-subtitle">Tham gia cộng đồng học tập trực tuyến hàng đầu Việt Nam</p>

        @if (ViewData["Error"] != null)
        {
            <div class="alert alert-error">
                @ViewData["Error"]
            </div>
        }

        @if (ViewData["Success"] != null)
        {
            <div class="alert alert-success">
                @ViewData["Success"]
            </div>
        }

        <form method="post" asp-action="Register" class="register-form">
            <div class="form-group">
                <label for="fullName" class="form-label">Họ và tên</label>
                <input type="text" id="fullName" name="fullName" class="form-input" 
                       placeholder="Nhập họ và tên của bạn" required>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" name="email" class="form-input" 
                       placeholder="Nhập địa chỉ email của bạn" required>
            </div>

            <div class="form-group">
                <label for="password" class="form-label">Mật khẩu</label>
                <input type="password" id="password" name="password" class="form-input" 
                       placeholder="Tạo mật khẩu mạnh" required>
            </div>

            <div class="form-group">
                <label for="confirmPassword" class="form-label">Xác nhận mật khẩu</label>
                <input type="password" id="confirmPassword" name="confirmPassword" class="form-input" 
                       placeholder="Nhập lại mật khẩu" required>
            </div>

            <button type="submit" class="register-btn">Tạo tài khoản</button>
        </form>

        <div class="login-link">
            Đã có tài khoản? <a href="@Url.Action("Login", "Home")">Đăng nhập ngay</a>
        </div>
    </div>

    <!-- Right Side - Features -->
    <div class="register-features">
        <div class="feature-card">
            <div class="feature-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V9C3 10.1 3.89 11 5 11V19C5 20.1 5.89 21 7 21H9C10.1 21 11 20.1 11 19V13H13V19C13 20.1 13.89 21 15 21H17C18.1 21 19 20.1 19 19V11C20.1 11 21 10.1 21 9Z"/>
                </svg>
            </div>
            <h3 class="feature-title">Học tập cá nhân hóa</h3>
            <p class="feature-description">
                Hệ thống AI thông minh phân tích năng lực và đề xuất lộ trình học tập phù hợp với từng cá nhân.
            </p>
        </div>

        <div class="feature-card">
            <div class="feature-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2ZM8 21L9.5 16.5L14 18L9.5 19.5L8 21ZM16 3L17 7L21 8L17 9L16 13L15 9L11 8L15 7L16 3Z"/>
                </svg>
            </div>
            <h3 class="feature-title">Bài thi thông minh</h3>
            <p class="feature-description">
                Ngân hàng câu hỏi phong phú với độ khó tự động điều chỉnh theo trình độ của từng học viên.
            </p>
        </div>

        <div class="feature-card">
            <div class="feature-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M16 4C18.2 4 20 5.8 20 8V16C20 18.2 18.2 20 16 20H8C5.8 20 4 18.2 4 16V8C4 5.8 5.8 4 8 4H16ZM16 2H8C4.7 2 2 4.7 2 8V16C2 19.3 4.7 22 8 22H16C19.3 22 22 19.3 22 16V8C22 4.7 19.3 2 16 2ZM12 6C9.8 6 8 7.8 8 10S9.8 14 12 14 16 12.2 16 10 14.2 6 12 6ZM12 12C10.9 12 10 11.1 10 10S10.9 8 12 8 14 8.9 14 10 13.1 12 12 12ZM18 16.5C18 17.9 15.3 19 12 19S6 17.9 6 16.5 8.7 14 12 14 18 15.1 18 16.5Z"/>
                </svg>
            </div>
            <h3 class="feature-title">Cộng đồng học tập</h3>
            <p class="feature-description">
                Kết nối với hàng ngàn học viên cùng chí hướng, chia sẻ kiến thức và cùng nhau tiến bộ.
            </p>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.register-form');
    const inputs = document.querySelectorAll('.form-input');
    
    // Form validation
    form.addEventListener('submit', function(e) {
        const fullName = document.getElementById('fullName').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        // Validate full name
        if (fullName.length < 2) {
            e.preventDefault();
            showError('Họ và tên phải có ít nhất 2 ký tự');
            return;
        }
        
        // Validate email
        const emailRegex = /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/;
        if (!emailRegex.test(email)) {
            e.preventDefault();
            showError('Email không hợp lệ');
            return;
        }
        
        // Validate password
        if (password.length < 6) {
            e.preventDefault();
            showError('Mật khẩu phải có ít nhất 6 ký tự');
            return;
        }
        
        // Validate password confirmation
        if (password !== confirmPassword) {
            e.preventDefault();
            showError('Mật khẩu xác nhận không khớp');
            return;
        }
    });
    
    // Add focus effects
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.classList.remove('focused');
        });
    });
    
    function showError(message) {
        // Remove existing error messages
        const existingError = document.querySelector('.alert-error');
        if (existingError) {
            existingError.remove();
        }
        
        // Create and show new error message
        const errorDiv = document.createElement('div');
        errorDiv.className = 'alert alert-error';
        errorDiv.textContent = message;
        
        const form = document.querySelector('.register-form');
        form.insertBefore(errorDiv, form.firstChild);
        
        // Scroll to error message
        errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Remove error after 5 seconds
        setTimeout(() => {
            errorDiv.remove();
        }, 5000);
    }
});
</script>