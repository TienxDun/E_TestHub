@{
    ViewData["Title"] = "Quản Lý Trường Học - Quản Trị Viên";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

@section Styles {
    <link href="~/css/admin/school-management.css" rel="stylesheet">
}

<div class="school-management-container">
    <div class="school-management-header">
        <h1 class="school-management-title">Quản Lý Trường Học</h1>
        <p class="school-management-subtitle">Quản lý thông tin trường học, lớp học và khóa học</p>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addClassModal">
            <i class="fas fa-plus"></i> Thêm Lớp Học
        </button>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addCourseModal">
            <i class="fas fa-plus"></i> Thêm Khóa Học
        </button>
        <button class="btn btn-secondary" id="refreshData">
            <i class="fas fa-sync"></i> Làm Mới
        </button>
    </div>

    <!-- Classes Section -->
    <div class="management-section">
        <div class="section-header">
            <h2 class="section-title">Danh Sách Lớp Học</h2>
            <div class="section-actions">
                <input type="text" id="classSearch" class="search-input" placeholder="Tìm kiếm lớp học..." />
            </div>
        </div>

        <div class="table-responsive">
            <table class="management-table" id="classesTable">
                <thead>
                    <tr>
                        <th>Mã Lớp</th>
                        <th>Tên Lớp</th>
                        <th>Khóa Học</th>
                        <th>Sĩ Số</th>
                        <th>Giáo Viên Chủ Nhiệm</th>
                        <th>Trạng Thái</th>
                        <th>Thao Tác</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sample data - will be populated from database -->
                    <tr>
                        <td>CNTT01</td>
                        <td>Công Nghệ Thông Tin 01</td>
                        <td>CNTT 2023-2024</td>
                        <td>35</td>
                        <td>Nguyễn Văn A</td>
                        <td><span class="status-badge status-active">Hoạt Động</span></td>
                        <td>
                            <button class="btn-action btn-edit" title="Chỉnh sửa">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-action btn-delete" title="Xóa">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>CNTT02</td>
                        <td>Công Nghệ Thông Tin 02</td>
                        <td>CNTT 2023-2024</td>
                        <td>32</td>
                        <td>Trần Thị B</td>
                        <td><span class="status-badge status-active">Hoạt Động</span></td>
                        <td>
                            <button class="btn-action btn-edit" title="Chỉnh sửa">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-action btn-delete" title="Xóa">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Courses Section -->
    <div class="management-section">
        <div class="section-header">
            <h2 class="section-title">Danh Sách Khóa Học</h2>
            <div class="section-actions">
                <input type="text" id="courseSearch" class="search-input" placeholder="Tìm kiếm khóa học..." />
            </div>
        </div>

        <div class="table-responsive">
            <table class="management-table" id="coursesTable">
                <thead>
                    <tr>
                        <th>Mã Khóa Học</th>
                        <th>Tên Khóa Học</th>
                        <th>Năm Bắt Đầu</th>
                        <th>Năm Kết Thúc</th>
                        <th>Số Lớp</th>
                        <th>Trạng Thái</th>
                        <th>Thao Tác</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sample data - will be populated from database -->
                    <tr>
                        <td>CNTT2023</td>
                        <td>Công Nghệ Thông Tin</td>
                        <td>2023</td>
                        <td>2024</td>
                        <td>6</td>
                        <td><span class="status-badge status-active">Đang Học</span></td>
                        <td>
                            <button class="btn-action btn-edit" title="Chỉnh sửa">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-action btn-delete" title="Xóa">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>KT2023</td>
                        <td>Kinh Tế</td>
                        <td>2023</td>
                        <td>2024</td>
                        <td>4</td>
                        <td><span class="status-badge status-active">Đang Học</span></td>
                        <td>
                            <button class="btn-action btn-edit" title="Chỉnh sửa">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-action btn-delete" title="Xóa">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add Class Modal -->
<div class="modal fade" id="addClassModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thêm Lớp Học Mới</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form id="addClassForm">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="classCode" class="form-label">Mã Lớp *</label>
                                <input type="text" id="classCode" name="classCode" class="form-control" required />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="className" class="form-label">Tên Lớp *</label>
                                <input type="text" id="className" name="className" class="form-control" required />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="courseId" class="form-label">Khóa Học *</label>
                        <select id="courseId" name="courseId" class="form-control" required>
                            <option value="">Chọn khóa học</option>
                            <option value="CNTT2023">Công Nghệ Thông Tin 2023-2024</option>
                            <option value="KT2023">Kinh Tế 2023-2024</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="teacherId" class="form-label">Giáo Viên Chủ Nhiệm</label>
                        <select id="teacherId" name="teacherId" class="form-control">
                            <option value="">Chọn giáo viên</option>
                            <option value="1">Nguyễn Văn A</option>
                            <option value="2">Trần Thị B</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="submit" class="btn btn-primary">Thêm Lớp Học</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Add Course Modal -->
<div class="modal fade" id="addCourseModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thêm Khóa Học Mới</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form id="addCourseForm">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="courseCode" class="form-label">Mã Khóa Học *</label>
                                <input type="text" id="courseCode" name="courseCode" class="form-control" required />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="courseName" class="form-label">Tên Khóa Học *</label>
                                <input type="text" id="courseName" name="courseName" class="form-control" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="startYear" class="form-label">Năm Bắt Đầu *</label>
                                <input type="number" id="startYear" name="startYear" class="form-control" min="2020" max="2030" value="2024" required />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="endYear" class="form-label">Năm Kết Thúc *</label>
                                <input type="number" id="endYear" name="endYear" class="form-control" min="2020" max="2030" value="2025" required />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="submit" class="btn btn-primary">Thêm Khóa Học</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            // Search functionality
            $('#classSearch').on('keyup', function () {
                var value = $(this).val().toLowerCase();
                $('#classesTable tbody tr').filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
            });

            $('#courseSearch').on('keyup', function () {
                var value = $(this).val().toLowerCase();
                $('#coursesTable tbody tr').filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
            });

            // Delete confirmation
            $('.btn-delete').click(function () {
                if (confirm('Bạn có chắc muốn xóa mục này?')) {
                    // Implement delete functionality
                    alert('Tính năng xóa sẽ được triển khai sau');
                }
            });

            // Edit functionality
            $('.btn-edit').click(function () {
                alert('Tính năng chỉnh sửa sẽ được triển khai sau');
            });

            // Refresh data
            $('#refreshData').click(function () {
                location.reload();
            });

            // Form submissions
            $('#addClassForm').submit(function (e) {
                e.preventDefault();
                // Implement add class functionality
                alert('Đang thêm lớp học... (Tính năng sẽ được triển khai sau)');
                $('#addClassModal').modal('hide');
            });

            $('#addCourseForm').submit(function (e) {
                e.preventDefault();
                // Implement add course functionality
                alert('Đang thêm khóa học... (Tính năng sẽ được triển khai sau)');
                $('#addCourseModal').modal('hide');
            });
        });
    </script>
}